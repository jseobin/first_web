{% extends 'admin/layout.html' %}
{% block content %}
<section class="panel">
    <h2>학생 계정 관리</h2>
    <form method="post" class="form-grid">
        <input type="hidden" name="action" value="create_student">
        <label>아이디
            <input name="username" required>
        </label>
        <label>비밀번호
            <input type="password" name="password" required>
        </label>
        <label>이름
            <input name="full_name" required>
        </label>
        <label>이메일
            <input name="email">
        </label>
        <label>전화번호
            <input name="phone">
        </label>
        <label>나이
            <input type="number" name="age">
        </label>
        <label>학력
            <input name="education">
        </label>
        <button class="btn" type="submit">학생 계정 생성</button>
    </form>
</section>

<section class="panel">
    <h3>학생 목록</h3>
    <div class="list-stack">
        {% for student in students %}
            <article class="card">
                <h4>{{ student.full_name }} ({{ student.username }})</h4>
                <p class="muted">{{ student.email or '-' }} / {{ student.phone or '-' }}</p>
                <details>
                    <summary>개인정보 수정</summary>
                    <form method="post" class="form-grid">
                        <input type="hidden" name="action" value="update_student">
                        <input type="hidden" name="student_id" value="{{ student.id }}">
                        <label>이름
                            <input name="full_name" value="{{ student.full_name }}" required>
                        </label>
                        <label>이메일
                            <input name="email" value="{{ student.email or '' }}">
                        </label>
                        <label>전화번호
                            <input name="phone" value="{{ student.phone or '' }}">
                        </label>
                        <label>나이
                            <input type="number" name="age" value="{{ student.age or '' }}">
                        </label>
                        <label>학력
                            <input name="education" value="{{ student.education or '' }}">
                        </label>
                        <label>자격증
                            <input name="certificates" value="{{ student.certificates or '' }}">
                        </label>
                        <label>소개
                            <textarea name="bio" rows="3">{{ student.bio or '' }}</textarea>
                        </label>
                        <label>새 비밀번호
                            <input type="password" name="new_password" placeholder="변경 시 입력">
                        </label>
                        <button class="btn" type="submit">수정 저장</button>
                    </form>
                </details>

                <form method="post">
                    <input type="hidden" name="action" value="delete_student">
                    <input type="hidden" name="student_id" value="{{ student.id }}">
                    <button class="btn ghost" data-confirm="학생 계정을 삭제할까요?" type="submit">계정 삭제</button>
                </form>
            </article>
        {% else %}
            <p>등록된 학생 계정이 없습니다.</p>
        {% endfor %}
    </div>
</section>
{% endblock %}
