{% extends 'tutoring/layout.html' %}
{% block content %}
<section class="panel">
    <h2>HOME</h2>
    <p>질문, 과제, 성적, 공지를 한 곳에서 관리하는 학습 대시보드입니다.</p>
    {% if student_user %}
        <div class="cards stats-grid">
            <article class="card">
                <h3>과제 현황</h3>
                <p>제출 건수: {{ assignment_summary.total if assignment_summary else 0 }}</p>
                <p>평균 성취도: {{ '%.1f'|format(assignment_summary.avg_progress if assignment_summary else 0) }}%</p>
            </article>
            <article class="card">
                <h3>성적 요약</h3>
                <p>등록 성적: {{ score_summary.total if score_summary else 0 }}건</p>
                <p>평균 점수율: {{ '%.1f'|format(score_summary.avg_rate if score_summary else 0) }}%</p>
            </article>
            <article class="card">
                <h3>빠른 이동</h3>
                <p><a href="{{ url_for('tutoring_qna') }}">질문 작성하기</a></p>
                <p><a href="{{ url_for('tutoring_assignments') }}">과제 제출하기</a></p>
            </article>
        </div>
    {% else %}
        <div class="card">
            <h3>학생 로그인 필요</h3>
            <p>Q&A 작성/수정, 과제 제출, 성적 조회는 로그인 후 사용 가능합니다.</p>
            <a class="btn" href="{{ url_for('tutoring_login') }}">학생 로그인</a>
        </div>
    {% endif %}
</section>

<section class="panel">
    <h2>최근 공지</h2>
    {% if pinned_notices %}
        <div class="notice-list">
            {% for notice in pinned_notices %}
                <article class="notice pinned">
                    <strong>[고정]</strong> {{ notice.title }}
                    <p>{{ notice.content }}</p>
                </article>
            {% endfor %}
        </div>
    {% endif %}
    <div class="notice-list">
        {% for notice in regular_notices %}
            <article class="notice">
                <strong>{{ notice.title }}</strong>
                <small>{{ notice.created_at }}</small>
                <p>{{ notice.content }}</p>
            </article>
        {% else %}
            <p>등록된 일반 공지가 없습니다.</p>
        {% endfor %}
    </div>
</section>
{% endblock %}
