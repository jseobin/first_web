{% extends 'tutoring/layout.html' %}
{% block content %}
<section class="panel">
    <h2>과제</h2>
    <p>과제 업로드와 나의 과제 성취도 현황을 확인할 수 있습니다.</p>
    <div class="list-stack">
        {% for assignment in assignments %}
            <article class="card">
                <div class="row between">
                    <h3>{{ assignment.title }}</h3>
                    <small>마감: {{ assignment.due_date or '미정' }}</small>
                </div>
                <p>{{ assignment.description }}</p>
                <p class="muted">
                    배정 유형:
                    {% if assignment.target_student_id %}
                        개인 과제
                    {% else %}
                        공통 과제
                    {% endif %}
                </p>
                <p class="muted">나의 진행률: {{ assignment.submission_progress if assignment.submission_progress is not none else 0 }}%</p>
                <form method="post" class="form-grid">
                    <input type="hidden" name="assignment_id" value="{{ assignment.id }}">
                    <label>제출 내용
                        <textarea name="content" rows="3">{{ assignment.submission_content or '' }}</textarea>
                    </label>
                    <label>성취도(0-100)
                        <input type="number" name="progress" min="0" max="100" value="{{ assignment.submission_progress if assignment.submission_progress is not none else 0 }}">
                    </label>
                    <button class="btn" type="submit">과제 업로드 / 수정</button>
                </form>
                <p class="muted">최근 수정: {{ assignment.submission_updated_at or '-' }}</p>
            </article>
        {% else %}
            <p>등록된 과제가 없습니다.</p>
        {% endfor %}
    </div>
</section>
{% endblock %}
